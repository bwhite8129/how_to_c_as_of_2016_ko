# 2016의 C 사용법

이 문서는 2015년 초에 썼지만, 어디에 내보내지는 않았습니다. 초안 폴더에 쳐박아둔채 아무에게도 보여주지 않았기 때문에 거의 다듬어지지 않은 글입니다. 딱 하나, 2015만 2016으로 바꾸어 내보냈습니다.

수정/개선/불만 무엇이든 편하게 말씀해주세요. - Matt<matt@matt.sh>

Keith Thompson이 써준 수정 사항들과 다른 의견들은 howto-c-response https://github.com/Keith-S-Thompson/how-to-c-response/blob/master/README.md 에서 확인하세요.

이제 글 시작합니다.

C 첫 번째 규칙은, 안쓸 수 있다면 쓰지 말라는 것입니다.

꼭, C로 프로그램을 작성해야한다면, 현대의 규칙을 따르세요.

C는 1970년대 초부터 쓰여왔습니다. 사람들은 C가 진화하며 거쳐온 어느 지점에서 "C를 배웠"고, 한 번 배운 후에는 그 지식이 잘 업데이트 되지 않았습니다. 그래서 각자가 처음 배웠을 시절의 C에 기반하여 모두 다른 생각들을 갖게 되었습니다.

C 개발에 대하여 "내가 8~90년대에 배운 것"에 갇히지 않는 것이 중요합니다.

이 글에서는 독자가 현대의 표준을 지원하는 현대적인 플랫폼 위에서 작업을 한다고 가정합니다. 오래된 레거시 호환에 대한 요구사항은 없다고 말이지요. 몇몇 회사가 20년된 시스템을 업그레이드하기 싫어한다고 해서, 전세계 모두가 고대의 표준에만 얽매여있을 수는 없습니다.

## 사전 점검
c99 표준 (c99는 "1999년에 만들어진 C 표준"을 의미합니다. c11은 "2011년에 만들어진 C 표준"입니다. 즉 11이 99보다 최신입니다).
- clang, 기본
  - clang은 기본으로 C11의 확장된 버전(`GNU C11 모드`)을 사용합니다. 따라서 현대적인 기능을 사용하는데 아무 옵션도 필요없습니다.
  - C11 표준을 사용하려면, `-std=c11`을 주면 됩니다. C99 표준을 쓰고 싶다면, `-std=c99`를 주면 됩니다.
  - clang은 gcc보다 컴파일이 더 빠릅니다.
- gcc는 `-std=c99`나 `-std=c11`를 주어야합니다.
  - gcc는 clang보다 컴파일은 느리지만, *가끔씩* 더 빠른 코드를 만들어냅니다. 성능비교와 회귀 테스트(Regression test)가 중요합니다.
  - gcc-5는 (clang과 동일하게) `GNU C11 모드`가 기본입니다.  정확한 C11이나 C99 표준을 사용하고 싶다면, `-std=c11`이나 `-std=c99`를 주면 됩니다.
  
최적화

- -O2, -O3
  - 일반적으로는 `-O2`를 쓰면 됩니다. 때로는 `-O3`가 필요할 수도 있습니다. 각 레벨(과 각 컴파일러)로 측정해보고 성능이 가장 좋은 버전을 사용하세요.
- -Os
  - (당연하지만) 캐시효율이 중요하다면, `-Os`가 도움이 됩니다.
